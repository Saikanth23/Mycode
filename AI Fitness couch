import tkinter as tk
from tkinter import ttk, messagebox

class AIFitnessCoach:
    def __init__(self, age, gender, weight, height_cm, activity_level, goal, dietary_preference):
        self.age = age
        self.gender = gender
        self.weight = weight
        self.height_cm = height_cm
        self.activity_level = activity_level
        self.goal = goal
        self.dietary_preference = dietary_preference
        self.bmr = self.calculate_bmr()
        self.calorie_needs = self.calculate_calorie_needs()

    def calculate_bmr(self):
        if self.gender.lower() == 'male':
            return 10 * self.weight + 6.25 * self.height_cm - 5 * self.age + 5
        else:
            return 10 * self.weight + 6.25 * self.height_cm - 5 * self.age - 161

    def calculate_calorie_needs(self):
        activity_multipliers = {
            'sedentary': 1.2,
            'light': 1.375,
            'moderate': 1.55,
            'active': 1.725,
            'very active': 1.9
        }
        return self.bmr * activity_multipliers.get(self.activity_level.lower(), 1.2)

    def suggest_diet(self):
        calorie_targets = {'weight loss': 0.8, 'maintenance': 1.0, 'muscle gain': 1.2}
        calories = self.calorie_needs * calorie_targets.get(self.goal.lower(), 1.0)
        
        if self.goal.lower() == 'muscle gain':
            protein = 2.2 * self.weight
            fat = 0.8 * self.weight
            carbs = (calories - (protein * 4 + fat * 9)) / 4
        elif self.goal.lower() == 'weight loss':
            protein = 2.0 * self.weight
            fat = 0.7 * self.weight
            carbs = (calories - (protein * 4 + fat * 9)) / 4
        else:
            protein = 1.8 * self.weight
            fat = 0.9 * self.weight
            carbs = (calories - (protein * 4 + fat * 9)) / 4
        
        return {
            'calories': round(calories),
            'protein_g': round(protein),
            'fat_g': round(fat),
            'carbs_g': round(carbs)
        }

    def suggest_exercise(self):
        plans = {
            'weight loss': 'Cardio 4-5 times/week + strength training 3 times/week',
            'muscle gain': 'Strength training 5 times/week + moderate cardio 2 times/week',
            'maintenance': 'Mixed cardio and strength training 3-4 times/week'
        }
        return plans.get(self.goal.lower(), 'Light activity 3 times/week')

    def get_suggestions(self):
        diet = self.suggest_diet()
        exercise = self.suggest_exercise()
        return {
            'diet_plan': diet,
            'exercise_plan': exercise,
            'dietary_preference': self.dietary_preference
        }

def on_submit():
    try:
        age = int(age_entry.get())
        gender = gender_var.get()
        weight = float(weight_entry.get())
        height = float(height_entry.get())
        activity_level = activity_var.get()
        goal = goal_var.get()
        dietary_preference = diet_var.get()

        coach = AIFitnessCoach(age, gender, weight, height, activity_level, goal, dietary_preference)
        suggestions = coach.get_suggestions()

        result_text = f"Calorie Intake: {suggestions['diet_plan']['calories']} kcal/day
"
        result_text += f"Protein: {suggestions['diet_plan']['protein_g']} g
"
        result_text += f"Fat: {suggestions['diet_plan']['fat_g']} g
"
        result_text += f"Carbs: {suggestions['diet_plan']['carbs_g']} g
"
        result_text += f"
Exercise Plan:
{suggestions['exercise_plan']}
"
        result_text += f"
Dietary Preference: {suggestions['dietary_preference']}"

        result_label.config(text=result_text)
    except ValueError:
        messagebox.showerror("Input Error", "Please enter valid numeric values for age, weight, and height.")

# Create the main window
root = tk.Tk()
root.title("AI Fitness Coach")

# Input fields
tk.Label(root, text="Age:").grid(row=0, column=0, sticky='e')
age_entry = tk.Entry(root)
age_entry.grid(row=0, column=1)

tk.Label(root, text="Gender:").grid(row=1, column=0, sticky='e')
gender_var = tk.StringVar(value='male')
gender_frame = tk.Frame(root)
tk.Radiobutton(gender_frame, text='Male', variable=gender_var, value='male').pack(side='left')
tk.Radiobutton(gender_frame, text='Female', variable=gender_var, value='female').pack(side='left')
gender_frame.grid(row=1, column=1)

tk.Label(root, text="Weight (kg):").grid(row=2, column=0, sticky='e')
weight_entry = tk.Entry(root)
weight_entry.grid(row=2, column=1)

tk.Label(root, text="Height (cm):").grid(row=3, column=0, sticky='e')
height_entry = tk.Entry(root)
height_entry.grid(row=3, column=1)

tk.Label(root, text="Activity Level:").grid(row=4, column=0, sticky='e')
activity_var = tk.StringVar(value='moderate')
activity_menu = ttk.Combobox(root, textvariable=activity_var)
activity_menu['values'] = ('sedentary', 'light', 'moderate', 'active', 'very active')
activity_menu.grid(row=4, column=1)

tk.Label(root, text="Goal:").grid(row=5, column=0, sticky='e')
goal_var = tk.StringVar(value='muscle gain')
goal_menu = ttk.Combobox(root, textvariable=goal_var)
goal_menu['values'] = ('weight loss', 'maintenance', 'muscle gain')
goal_menu.grid(row=5, column=1)

tk.Label(root, text="Dietary Preference:").grid(row=6, column=0, sticky='e')
diet_var = tk.StringVar(value='no preference')
diet_menu = ttk.Combobox(root, textvariable=diet_var)
diet_menu['values'] = ('no preference', 'vegetarian', 'vegan', 'pescatarian', 'keto', 'paleo')
diet_menu.grid(row=6, column=1)

# Button to submit and get suggestions
submit_button = tk.Button(root, text="Get Suggestions", command=on_submit)
submit_button.grid(row=7, column=0, columnspan=2, pady=10)

# Label to display results
result_label = tk.Label(root, text="", justify='left', font=("Arial", 10))
result_label.grid(row=8, column=0, columnspan=2, pady=10)

root.mainloop()
